{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,S,iECAA,IAAAC,EAAAD,EAAA,SAGME,EAAM,IAAI,G,cAAAC,SACVC,EAAoBC,SAASC,cAAc,yBAC3CC,EAAkBF,SAASC,cAAc,uBAEvBD,SAASC,cAAc,iBAG/BE,iBAAiB,SAEjC,SAA4BC,GAC1B,GAA4B,WAAxBA,EAAIC,OAAOC,SACb,OAGF,GAAIF,EAAIC,OAAOE,UAAUC,SAAS,wBAQhC,OAPAT,EAAkBQ,UAAUE,IAAI,aAChCP,EAAgBK,UAAUG,OAAO,kBAC7BN,EAAIC,OAAOE,UAAUC,SAAS,eAChCX,EAAIc,QAAQ,aACZC,aAAaC,QAAQ,WAAY,cACjC,EAAAjB,EAAAkB,aAAYjB,EAAIkB,aAKpB,GAAIX,EAAIC,OAAOE,UAAUC,SAAS,sBAQhC,OAPAT,EAAkBQ,UAAUG,OAAO,aACnCR,EAAgBK,UAAUE,IAAI,kBAC1BL,EAAIC,OAAOE,UAAUC,SAAS,eAChCX,EAAIc,QAAQ,SACZC,aAAaC,QAAQ,WAAY,UACjC,EAAAjB,EAAAkB,aAAYjB,EAAIkB,Y,qBDtBhBC,EAAoBhB,SAASC,cAAc,yBAC3CgB,EAAkBjB,SAASC,cAAc,uBAEN,UAArCW,aAAaM,QAAQ,YACvBD,EAAgBV,UAAUE,IAAI,aAE9BO,EAAkBT,UAAUE,IAAI,cAGlC,EAAAU,EAAAC,WAAU,WAEV,IAAMC,EAAM,IAAI,EAAAC,EAAAxB,SAChBuB,EAAIV,QAAQ,cACZ,EAAAY,EAAAC,oBAAmB9B,EAAA+B,MAAM,SAAAC,GACvB,GAAIA,EAAM,CACIA,EAAKC,IACwB,UAArCf,aAAaM,QAAQ,aACvBD,EAAgBV,UAAUE,IAAI,cAC9B,EAAAb,EAAAkB,aAAY,WAEZE,EAAkBT,UAAUE,IAAI,cAChC,EAAAb,EAAAkB,aAAYO,EAAIN,YAGlBH,aAAaC,QAAQ,OAAQ,IAC7B,EAAAM,EAAAS,mBACA,EAAAT,EAAAU,kB,MAEAC,QAAQC,IAAI,sBACZnB,aAAaC,QAAQ,OAAQ,GAC7BmB,SAASC,QAAQ,e","sources":["src/library.js","src/js/onLibraryBtnsClick.js"],"sourcesContent":["import { auth } from './js/firebase/auth';\nimport MovieApiService from './js/movie-service';\nimport {\n  // createUserWithEmailAndPassword,\n  // signInWithEmailAndPassword,\n  onAuthStateChanged,\n} from 'firebase/auth';\nimport refs from './js/refs';\nimport { removeAuthBtns, renderNav, addLogOutButton } from './js/auth/auth-nav';\nimport { insertData, readData } from './js/firebase/db-service';\nimport './js/onLibraryBtnsClick';\nimport { libraryList } from './js/renderLibraryList';\nconst libraryWatchedBtn = document.querySelector('.library__watched-btn');\nconst libraryQueueBtn = document.querySelector('.library__queue-btn');\n\nif (localStorage.getItem('typeList') === 'queue') {\n  libraryQueueBtn.classList.add('is-active');\n} else {\n  libraryWatchedBtn.classList.add('is-active');\n}\n\nrenderNav('library');\n\nconst api = new MovieApiService();\napi.setType('watchlist');\nonAuthStateChanged(auth, user => {\n  if (user) {\n    const uid = user.uid;\n    if (localStorage.getItem('typeList') === 'queue') {\n      libraryQueueBtn.classList.add('is-active');\n      libraryList('queue');\n    } else {\n      libraryWatchedBtn.classList.add('is-active');\n      libraryList(api.getType());\n    }\n\n    localStorage.setItem('auth', 1);\n    removeAuthBtns();\n    addLogOutButton();\n  } else {\n    console.log('User is signed out');\n    localStorage.setItem('auth', 0);\n    location.replace('./index.html');\n  }\n});\n\n// import MovieApiService from './js/movie-service';\n// import genre from './genres.json';\n// import { showInfoModal } from './js/model-info-film';\n\n// const api = new MovieApiService();\n\n// const cardList = document.querySelector('.js-films-list-library');\n// const infoModal = document.querySelector('.modal-holder');\n\n// export const watchList = [\n//   724495, 436270, 944864, 436270, 944864, 724495, 436270, 944864, 724495,\n//   436270, 944864, 724495, 436270, 944864, 724495, 436270, 944864, 724495,\n//   436270, 944864, 724495, 436270, 944864, 724495, 436270, 944864, 724495,\n//   436270, 944864, 724495, 436270, 944864, 724495, 436270, 944864, 724495,\n//   436270, 944864, 724495, 436270, 944864, 724495, 436270, 944864, 724495,\n// ];\n// export const queueList = [436270, 944864, 724495];\n\n// const watchlist = [49046, 913290, 766475];\n// const movies = watchlist.map(api.getMovieInfo);\n\n// async function promiceAll(movies) {\n//   refs.filmsContainer.innerHTML = '<span class=\"loader\"></span>';\n//   await Promise.all(movies)\n//     .then(array => {\n//       refs.filmsContainer.innerHTML = '';\n//       createFilmCardMarkup(array);\n//     })\n//     .catch(console.log);\n// }\n\n// promiceAll(movies);\n\n// function createFilmCardMarkup(films) {\n//   console.log(films);\n//   const newMarkup = films\n//     .map(film => {\n//       const {\n//         original_title,\n//         poster_path,\n//         vote_average,\n//         release_date,\n//         genres,\n//         id,\n//       } = film;\n//       const fIlmIds = genres.map(genre => genre.id);\n//       const year = new Date(release_date).getFullYear();\n//       return `<li data-id=\"${id}\" class=\"card film-card\">\n//                         <div class=\"film-card__img-wrap\">\n//                             <img\n//                                 class=\"film-card__img\"\n//                                 src=${fetchFilmPhoto(poster_path)}\n//                                 alt=\"Poster to movie\"\n//                                 width=\"395\"\n//                                 height=\"574\"\n//                             />\n//                         </div>\n//                         <div class=\"film-card__wrap\">\n//                             <h2 class=\"film-card__title\">${original_title}</h2>\n//                             <div class=\"film-card__wrapper\">\n//                                 <span class=\"film-card__info\">${getGenres(\n//                                   fIlmIds\n//                                 ).join(', ')} | ${year}</span>\n//                                 <span data-film-rating class=\"film-card__rating\">${vote_average.toFixed(\n//                                   2\n//                                 )}</span>\n//                             </div>\n//                         </div>\n//                     </li>`;\n//     })\n//     .join('');\n//   cardList.innerHTML = newMarkup;\n\n//   // cardList.addEventListener('click', event => {\n//   //   const card = event.target.closest('li');\n//   //   if (card) {\n//   //     const cardId = card.getAttribute('data-id');\n//   //     showInfoModal(infoModal, api, cardId);\n//   //   }\n//   // });\n// }\n\n// function fetchFilmPhoto(posterPath) {\n//   const noPosterAvaliable =\n//     'https://www.reelviews.net/resources/img/default_poster.jpg';\n\n//   return posterPath\n//     ? `https://image.tmdb.org/t/p/w500${posterPath}`\n//     : noPosterAvaliable;\n// }\n\n// function getGenres(ids) {\n//   let newArray = [];\n//   for (let i = 0; i < ids.length; i += 1) {\n//     genre.genres.find(({ id, name }) => {\n//       if (id === ids[i]) {\n//         newArray.push(name);\n//       }\n//     });\n//   }\n//   if (newArray.length > 2) {\n//     newArray.splice(2, 3, 'Other');\n//   }\n//   return newArray;\n// }\n","import { libraryList } from './renderLibraryList';\nimport MovieApiService from './movie-service';\n\nconst api = new MovieApiService();\nconst libraryWatchedBtn = document.querySelector('.library__watched-btn');\nconst libraryQueueBtn = document.querySelector('.library__queue-btn');\n\nconst libraryBtnGroup = document.querySelector('.button-group');\n\n// window.addEventListener('load', libraryList('watchlist'));\nlibraryBtnGroup.addEventListener('click', onLibraryBtnsClick);\n\nfunction onLibraryBtnsClick(evt) {\n  if (evt.target.nodeName !== 'BUTTON') {\n    return;\n  }\n\n  if (evt.target.classList.contains('library__watched-btn')) {\n    libraryWatchedBtn.classList.add('is-active');\n    libraryQueueBtn.classList.remove('is-active');\n    if (evt.target.classList.contains('is-active')) {\n      api.setType('watchlist');\n      localStorage.setItem('typeList', 'watchlist');\n      libraryList(api.getType());\n    }\n    return;\n  }\n\n  if (evt.target.classList.contains('library__queue-btn')) {\n    libraryWatchedBtn.classList.remove('is-active');\n    libraryQueueBtn.classList.add('is-active');\n    if (evt.target.classList.contains('is-active')) {\n      api.setType('queue');\n      localStorage.setItem('typeList', 'queue');\n      libraryList(api.getType());\n    }\n    return;\n  }\n}\n"],"names":["$cO4lv","parcelRequire","$kCXzw","$d2129ef13c307180$var$api","default","$d2129ef13c307180$var$libraryWatchedBtn","document","querySelector","$d2129ef13c307180$var$libraryQueueBtn","addEventListener","evt","target","nodeName","classList","contains","add","remove","setType","localStorage","setItem","libraryList","getType","$cecbdd76f2d3d4bd$var$libraryWatchedBtn","$cecbdd76f2d3d4bd$var$libraryQueueBtn","getItem","$kuom3","renderNav","$cecbdd76f2d3d4bd$var$api","$h4uzj","$3SEMc","onAuthStateChanged","auth","user","uid","removeAuthBtns","addLogOutButton","console","log","location","replace"],"version":3,"file":"library.8f1b8c96.js.map"}