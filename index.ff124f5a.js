!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},n={},r=t.parcelRequire6569;null==r&&((r=function(e){if(e in a)return a[e].exports;if(e in n){var t=n[e];delete n[e];var r={id:e,exports:{}};return a[e]=r,t.call(r.exports,r,r.exports),r.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){n[e]=t},t.parcelRequire6569=r);var i=r("h4uzj"),o=r("iU1Pc");r("1VFfL");var l=r("bX5uF"),u=r("fKcg4");i=r("h4uzj");function s(e){localStorage.setItem("loc",JSON.stringify(e))}function c(){return JSON.parse(localStorage.getItem("loc"))}function d(e){localStorage.setItem("page",JSON.stringify(e))}function f(){return JSON.parse(localStorage.getItem("page"))}var g=r("cO4lv"),v=r("3SEMc"),p=r("crGj6"),m=r("kuom3"),h=r("lOnjo"),_=r("4Nugj");(0,m.renderNav)("index");var w=document.querySelector("#modal-btn-auth");w&&w.addEventListener("click",p.onShowAuthModal),p.formBackdropRef.addEventListener("click",p.onClickBackdrop);var S=new(0,i.default);function L(e){S.setContainerRef(_.default.filmsContainer),S.setPage(f()||S.getStartPage()),S.getMoviesList().then((function(t){var a=t.results,n=t.total_pages;_.default.filmsContainer.innerHTML="",S.resetContainerRef(),l.default.reset(10*n),b(a),l.default.movePageTo(e)})).catch(console.log)}function C(t,a){S.setContainerRef(_.default.filmsContainer),S.setPage(f()||S.getStartPage()),S.getMovie(t).then((function(t){var n=t.results,r=t.total_pages;_.default.filmsContainer.innerHTML="",S.resetContainerRef(),l.default.reset(10*r),0!==n.length?(b(n),l.default.movePageTo(a||S.resetPage())):e(o).Notify.failure("Search result not successful. Enter the correct movie name and",{position:"center-top",fontFamily:"inherit",borderRadius:"25px",clickToClose:!0})})).catch(console.log)}function b(t){S.isLibrary=!1;var a=t.map((function(t){var a,n,r=t.original_title,i=t.poster_path,o=t.vote_average,l=t.release_date,s=t.genre_ids,c=t.id,d=new Date(l).getFullYear();return'<li data-id="'.concat(c,'" class="card film-card">\n                        <div class="film-card__img-wrap">\n                            <img\n                                class="film-card__img"\n                                src=').concat((a=i,n="https://www.reelviews.net/resources/img/default_poster.jpg",a?"https://image.tmdb.org/t/p/w500".concat(a):n),'\n                                alt="Poster to movie"\n                                width="395"\n                                height="574"\n                            />\n                        </div>\n                        <div class="film-card__wrap">\n                            <h2 class="film-card__title">').concat(r,'</h2>\n                            <div class="film-card__wrapper">\n                                <span class="film-card__info">').concat(function(t){for(var a=function(a){e(u).genres.find((function(e){var r=e.id,i=e.name;r===t[a]&&n.push(i)}))},n=[],r=0;r<t.length;r+=1)a(r);n.length>2&&n.splice(2,3,"Other");return n}(s).join(", ")," | ").concat(d,'</span>\n                                <span data-film-rating class="film-card__rating">').concat(o.toFixed(2),"</span>\n                            </div>\n                        </div>\n                    </li>")})).join("");_.default.cardList.innerHTML=a,_.default.cardList.addEventListener("click",(function(e){var t=e.target.closest("li");if(t){var a=t.getAttribute("data-id");(0,h.showInfoModal)(S,a)}}))}_.default.form.addEventListener("submit",(function(t){t.preventDefault(),S.resetPage(),l.default.reset(),d(S.getStartPage());var a=t.currentTarget.elements.searchQuery.value.trim().toLowerCase();if(!a)return void e(o).Notify.failure("Enter the name of the movie!",{position:"center-top",fontFamily:"inherit",borderRadius:"25px",clickToClose:!0});return C(a||_.default.input.value)})),_.default.paginationList.addEventListener("click",(function(){return S.page=l.default.getCurrentPage(),d(S.page),window.scrollTo({top:0,left:0,behavior:"smooth"}),""===_.default.input.value?L(f()):C(c(),f())})),_.default.input.addEventListener("input",(function(e){s(e.target.value),(""===e.target.value||null===c())&&(d(1),L(1))})),_.default.input.value=c(),function(e){if(""!==e)return s(_.default.input.value),C(c(),f()||S.getStartPage()),void l.default.reset();L(f()||S.getStartPage())}(_.default.input.value),(0,v.onAuthStateChanged)(g.auth,(function(e){if(e){e.uid;localStorage.setItem("auth","1"),(0,m.removeAuthBtns)(),(0,m.addNav)("index"),(0,m.addLogOutButton)()}else console.log("User is signed out"),localStorage.setItem("auth","0"),(0,m.addAuthBtns)(),(0,m.removeNav)(),document.querySelector("#modal-btn-auth").addEventListener("click",p.onShowAuthModal)}))}();
//# sourceMappingURL=index.ff124f5a.js.map
